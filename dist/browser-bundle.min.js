/*! imboclient-js v2.0.0-beta 2013-11-04 */
!function(a){"object"==typeof exports?module.exports=a():"function"==typeof define&&define.amd?define(a):"undefined"!=typeof window?window.Imbo=a():"undefined"!=typeof global?global.Imbo=a():"undefined"!=typeof self&&(self.Imbo=a())}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){c.Client=a("./lib/client"),c.Url=a("./lib/url"),c.Query=a("./lib/query")},{"./lib/client":8,"./lib/query":9,"./lib/url":10}],2:[function(a,b){var c,d=a("__browserify_process"),e=a("./sha"),f=a("./md5.min"),g=a("./readers"),h="undefined"!=typeof window.Worker,i=[],j=function(){i.length>1||i.length&&c.postMessage(i[0].buffer)},k=function(a,b){h?(i.push({buffer:a,callback:b}),j()):d.nextTick(function(){b(void 0,f.ArrayBuffer.hash(a))})};h&&(c=new Worker(window.URL.createObjectURL(new Blob([';(function(e,t,n){function i(n,s){if(!t[n]){if(!e[n]){var o=typeof require=="function"&&require;if(!s&&o)return o(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module \'"+n+"\'")}var u=t[n]={exports:{}};e[n][0].call(u.exports,function(t){var r=e[n][1][t];return i(r?r:t)},u,u.exports)}return t[n].exports}var r=typeof require=="function"&&require;for(var s=0;s<n.length;s++)i(n[s]);return i})({1:[function(require,module,exports){\n(function(){/* global self */\n\'use strict\';\nvar md5 = require(\'./md5.min\');\nself.onmessage = function(e) {\n    self.postMessage(md5.ArrayBuffer.hash(e.data));\n};\n})()\n},{"./md5.min":2}],2:[function(require,module,exports){\n(function(r){module.exports=r()})(function(r){"use strict";var n=function(r,n){return r+n&4294967295},t=function(r,t,u,e,o,f){t=n(n(t,r),n(e,f));return n(t<<o|t>>>32-o,u)},u=function(r,n,u,e,o,f,a){return t(n&u|~n&e,r,n,o,f,a)},e=function(r,n,u,e,o,f,a){return t(n&e|u&~e,r,n,o,f,a)},o=function(r,n,u,e,o,f,a){return t(n^u^e,r,n,o,f,a)},f=function(r,n,u,e,o,f,a){return t(u^(n|~e),r,n,o,f,a)},a=function(r,t){var a=r[0],i=r[1],c=r[2],h=r[3];a=u(a,i,c,h,t[0],7,-680876936);h=u(h,a,i,c,t[1],12,-389564586);c=u(c,h,a,i,t[2],17,606105819);i=u(i,c,h,a,t[3],22,-1044525330);a=u(a,i,c,h,t[4],7,-176418897);h=u(h,a,i,c,t[5],12,1200080426);c=u(c,h,a,i,t[6],17,-1473231341);i=u(i,c,h,a,t[7],22,-45705983);a=u(a,i,c,h,t[8],7,1770035416);h=u(h,a,i,c,t[9],12,-1958414417);c=u(c,h,a,i,t[10],17,-42063);i=u(i,c,h,a,t[11],22,-1990404162);a=u(a,i,c,h,t[12],7,1804603682);h=u(h,a,i,c,t[13],12,-40341101);c=u(c,h,a,i,t[14],17,-1502002290);i=u(i,c,h,a,t[15],22,1236535329);a=e(a,i,c,h,t[1],5,-165796510);h=e(h,a,i,c,t[6],9,-1069501632);c=e(c,h,a,i,t[11],14,643717713);i=e(i,c,h,a,t[0],20,-373897302);a=e(a,i,c,h,t[5],5,-701558691);h=e(h,a,i,c,t[10],9,38016083);c=e(c,h,a,i,t[15],14,-660478335);i=e(i,c,h,a,t[4],20,-405537848);a=e(a,i,c,h,t[9],5,568446438);h=e(h,a,i,c,t[14],9,-1019803690);c=e(c,h,a,i,t[3],14,-187363961);i=e(i,c,h,a,t[8],20,1163531501);a=e(a,i,c,h,t[13],5,-1444681467);h=e(h,a,i,c,t[2],9,-51403784);c=e(c,h,a,i,t[7],14,1735328473);i=e(i,c,h,a,t[12],20,-1926607734);a=o(a,i,c,h,t[5],4,-378558);h=o(h,a,i,c,t[8],11,-2022574463);c=o(c,h,a,i,t[11],16,1839030562);i=o(i,c,h,a,t[14],23,-35309556);a=o(a,i,c,h,t[1],4,-1530992060);h=o(h,a,i,c,t[4],11,1272893353);c=o(c,h,a,i,t[7],16,-155497632);i=o(i,c,h,a,t[10],23,-1094730640);a=o(a,i,c,h,t[13],4,681279174);h=o(h,a,i,c,t[0],11,-358537222);c=o(c,h,a,i,t[3],16,-722521979);i=o(i,c,h,a,t[6],23,76029189);a=o(a,i,c,h,t[9],4,-640364487);h=o(h,a,i,c,t[12],11,-421815835);c=o(c,h,a,i,t[15],16,530742520);i=o(i,c,h,a,t[2],23,-995338651);a=f(a,i,c,h,t[0],6,-198630844);h=f(h,a,i,c,t[7],10,1126891415);c=f(c,h,a,i,t[14],15,-1416354905);i=f(i,c,h,a,t[5],21,-57434055);a=f(a,i,c,h,t[12],6,1700485571);h=f(h,a,i,c,t[3],10,-1894986606);c=f(c,h,a,i,t[10],15,-1051523);i=f(i,c,h,a,t[1],21,-2054922799);a=f(a,i,c,h,t[8],6,1873313359);h=f(h,a,i,c,t[15],10,-30611744);c=f(c,h,a,i,t[6],15,-1560198380);i=f(i,c,h,a,t[13],21,1309151649);a=f(a,i,c,h,t[4],6,-145523070);h=f(h,a,i,c,t[11],10,-1120210379);c=f(c,h,a,i,t[2],15,718787259);i=f(i,c,h,a,t[9],21,-343485551);r[0]=n(a,r[0]);r[1]=n(i,r[1]);r[2]=n(c,r[2]);r[3]=n(h,r[3])},i=function(r){var n=[],t;for(t=0;t<64;t+=4){n[t>>2]=r.charCodeAt(t)+(r.charCodeAt(t+1)<<8)+(r.charCodeAt(t+2)<<16)+(r.charCodeAt(t+3)<<24)}return n},c=function(r){var n=[],t;for(t=0;t<64;t+=4){n[t>>2]=r[t]+(r[t+1]<<8)+(r[t+2]<<16)+(r[t+3]<<24)}return n},h=function(r){var n=r.length,t=[1732584193,-271733879,-1732584194,271733878],u,e,o,f,c,h;for(u=64;u<=n;u+=64){a(t,i(r.substring(u-64,u)))}r=r.substring(u-64);e=r.length;o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(u=0;u<e;u+=1){o[u>>2]|=r.charCodeAt(u)<<(u%4<<3)}o[u>>2]|=128<<(u%4<<3);if(u>55){a(t,o);for(u=0;u<16;u+=1){o[u]=0}}f=n*8;f=f.toString(16).match(/(.*?)(.{0,8})$/);c=parseInt(f[2],16);h=parseInt(f[1],16)||0;o[14]=c;o[15]=h;a(t,o);return t},s=function(r){var n=r.length,t=[1732584193,-271733879,-1732584194,271733878],u,e,o,f,i,h;for(u=64;u<=n;u+=64){a(t,c(r.subarray(u-64,u)))}r=u-64<n?r.subarray(u-64):new Uint8Array(0);e=r.length;o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(u=0;u<e;u+=1){o[u>>2]|=r[u]<<(u%4<<3)}o[u>>2]|=128<<(u%4<<3);if(u>55){a(t,o);for(u=0;u<16;u+=1){o[u]=0}}f=n*8;f=f.toString(16).match(/(.*?)(.{0,8})$/);i=parseInt(f[2],16);h=parseInt(f[1],16)||0;o[14]=i;o[15]=h;a(t,o);return t},v=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],d=function(r){var n="",t;for(t=0;t<4;t+=1){n+=v[r>>t*8+4&15]+v[r>>t*8&15]}return n},g=function(r){var n;for(n=0;n<r.length;n+=1){r[n]=d(r[n])}return r.join("")},A=function(r){return g(h(r))};var b=function(){this.reset()};if(A("hello")!=="5d41402abc4b2a76b9719d911017c592"){n=function(r,n){var t=(r&65535)+(n&65535),u=(r>>16)+(n>>16)+(t>>16);return u<<16|t&65535}}b.ArrayBuffer=function(){};b.ArrayBuffer.hash=function(r){return g(s(new Uint8Array(r)))};return b});\n},{}]},{},[1])\n;'],{type:"text/javascript"}))),c.addEventListener("message",function(a){var b=i.shift();b.callback(void 0,a.data),j()},!1)),b.exports={sha256:function(a,b){return e.sha256hmac(a,b)},md5:function(a,c,e){return e&&"url"===e.type?g.getContentsFromUrl(a,function(a,d){b.exports.md5(d,c,{binary:!0})}):a instanceof window.File?g.getContentsFromFile(a,function(a,d){b.exports.md5(d,c,{binary:!0})}):(d.nextTick(function(){k(a,c)}),void 0)}}},{"./md5.min":4,"./readers":5,"./sha":7,__browserify_process:11}],3:[function(a,b,c){"use strict";c.getUnsupported=function(){var a=[];return window.FileReader||a.push("FileReader"),window.ArrayBuffer||a.push("ArrayBuffer"),window.XMLHttpRequest||a.push("XMLHttpRequest"),"upload"in new XMLHttpRequest||a.push("XMLHttpRequest2"),a}},{}],4:[function(a,b){!function(a){b.exports=a()}(function(){"use strict";var a=function(a,b){return 4294967295&a+b},b=function(b,c,d,e,f,g){return c=a(a(c,b),a(e,g)),a(c<<f|c>>>32-f,d)},c=function(a,c,d,e,f,g,h){return b(c&d|~c&e,a,c,f,g,h)},d=function(a,c,d,e,f,g,h){return b(c&e|d&~e,a,c,f,g,h)},e=function(a,c,d,e,f,g,h){return b(c^d^e,a,c,f,g,h)},f=function(a,c,d,e,f,g,h){return b(d^(c|~e),a,c,f,g,h)},g=function(b,g){var h=b[0],i=b[1],j=b[2],k=b[3];h=c(h,i,j,k,g[0],7,-680876936),k=c(k,h,i,j,g[1],12,-389564586),j=c(j,k,h,i,g[2],17,606105819),i=c(i,j,k,h,g[3],22,-1044525330),h=c(h,i,j,k,g[4],7,-176418897),k=c(k,h,i,j,g[5],12,1200080426),j=c(j,k,h,i,g[6],17,-1473231341),i=c(i,j,k,h,g[7],22,-45705983),h=c(h,i,j,k,g[8],7,1770035416),k=c(k,h,i,j,g[9],12,-1958414417),j=c(j,k,h,i,g[10],17,-42063),i=c(i,j,k,h,g[11],22,-1990404162),h=c(h,i,j,k,g[12],7,1804603682),k=c(k,h,i,j,g[13],12,-40341101),j=c(j,k,h,i,g[14],17,-1502002290),i=c(i,j,k,h,g[15],22,1236535329),h=d(h,i,j,k,g[1],5,-165796510),k=d(k,h,i,j,g[6],9,-1069501632),j=d(j,k,h,i,g[11],14,643717713),i=d(i,j,k,h,g[0],20,-373897302),h=d(h,i,j,k,g[5],5,-701558691),k=d(k,h,i,j,g[10],9,38016083),j=d(j,k,h,i,g[15],14,-660478335),i=d(i,j,k,h,g[4],20,-405537848),h=d(h,i,j,k,g[9],5,568446438),k=d(k,h,i,j,g[14],9,-1019803690),j=d(j,k,h,i,g[3],14,-187363961),i=d(i,j,k,h,g[8],20,1163531501),h=d(h,i,j,k,g[13],5,-1444681467),k=d(k,h,i,j,g[2],9,-51403784),j=d(j,k,h,i,g[7],14,1735328473),i=d(i,j,k,h,g[12],20,-1926607734),h=e(h,i,j,k,g[5],4,-378558),k=e(k,h,i,j,g[8],11,-2022574463),j=e(j,k,h,i,g[11],16,1839030562),i=e(i,j,k,h,g[14],23,-35309556),h=e(h,i,j,k,g[1],4,-1530992060),k=e(k,h,i,j,g[4],11,1272893353),j=e(j,k,h,i,g[7],16,-155497632),i=e(i,j,k,h,g[10],23,-1094730640),h=e(h,i,j,k,g[13],4,681279174),k=e(k,h,i,j,g[0],11,-358537222),j=e(j,k,h,i,g[3],16,-722521979),i=e(i,j,k,h,g[6],23,76029189),h=e(h,i,j,k,g[9],4,-640364487),k=e(k,h,i,j,g[12],11,-421815835),j=e(j,k,h,i,g[15],16,530742520),i=e(i,j,k,h,g[2],23,-995338651),h=f(h,i,j,k,g[0],6,-198630844),k=f(k,h,i,j,g[7],10,1126891415),j=f(j,k,h,i,g[14],15,-1416354905),i=f(i,j,k,h,g[5],21,-57434055),h=f(h,i,j,k,g[12],6,1700485571),k=f(k,h,i,j,g[3],10,-1894986606),j=f(j,k,h,i,g[10],15,-1051523),i=f(i,j,k,h,g[1],21,-2054922799),h=f(h,i,j,k,g[8],6,1873313359),k=f(k,h,i,j,g[15],10,-30611744),j=f(j,k,h,i,g[6],15,-1560198380),i=f(i,j,k,h,g[13],21,1309151649),h=f(h,i,j,k,g[4],6,-145523070),k=f(k,h,i,j,g[11],10,-1120210379),j=f(j,k,h,i,g[2],15,718787259),i=f(i,j,k,h,g[9],21,-343485551),b[0]=a(h,b[0]),b[1]=a(i,b[1]),b[2]=a(j,b[2]),b[3]=a(k,b[3])},h=function(a){var b,c=[];for(b=0;64>b;b+=4)c[b>>2]=a.charCodeAt(b)+(a.charCodeAt(b+1)<<8)+(a.charCodeAt(b+2)<<16)+(a.charCodeAt(b+3)<<24);return c},i=function(a){var b,c=[];for(b=0;64>b;b+=4)c[b>>2]=a[b]+(a[b+1]<<8)+(a[b+2]<<16)+(a[b+3]<<24);return c},j=function(a){var b,c,d,e,f,i,j=a.length,k=[1732584193,-271733879,-1732584194,271733878];for(b=64;j>=b;b+=64)g(k,h(a.substring(b-64,b)));for(a=a.substring(b-64),c=a.length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=0;c>b;b+=1)d[b>>2]|=a.charCodeAt(b)<<(b%4<<3);if(d[b>>2]|=128<<(b%4<<3),b>55)for(g(k,d),b=0;16>b;b+=1)d[b]=0;return e=8*j,e=e.toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(e[2],16),i=parseInt(e[1],16)||0,d[14]=f,d[15]=i,g(k,d),k},k=function(a){var b,c,d,e,f,h,j=a.length,k=[1732584193,-271733879,-1732584194,271733878];for(b=64;j>=b;b+=64)g(k,i(a.subarray(b-64,b)));for(a=j>b-64?a.subarray(b-64):new Uint8Array(0),c=a.length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=0;c>b;b+=1)d[b>>2]|=a[b]<<(b%4<<3);if(d[b>>2]|=128<<(b%4<<3),b>55)for(g(k,d),b=0;16>b;b+=1)d[b]=0;return e=8*j,e=e.toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(e[2],16),h=parseInt(e[1],16)||0,d[14]=f,d[15]=h,g(k,d),k},l=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],m=function(a){var b,c="";for(b=0;4>b;b+=1)c+=l[15&a>>8*b+4]+l[15&a>>8*b];return c},n=function(a){var b;for(b=0;b<a.length;b+=1)a[b]=m(a[b]);return a.join("")},o=function(a){return n(j(a))},p=function(){this.reset()};return"5d41402abc4b2a76b9719d911017c592"!==o("hello")&&(a=function(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}),p.ArrayBuffer=function(){},p.ArrayBuffer.hash=function(a){return n(k(new Uint8Array(a)))},p})},{}],5:[function(a,b,c){"use strict";c.getContentsFromFile=function(a,b){var c=new FileReader;c.onload=function(a){return b(void 0,a.target.result)},c.readAsArrayBuffer(a)},c.getContentsFromUrl=function(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.responseType="arraybuffer",c.onreadystatechange=function(){4===c.readyState&&b(void 0,c.responseText)},c.send(null)}},{}],6:[function(a,b){"use strict";var c=["User-Agent","Content-Length"],d=function(a){for(var b={headers:{},statusCode:a.status},c=a.getAllResponseHeaders().split("\r\n"),d=0;d<c.length;d++){var e=c[d],f=e.indexOf(": ");if(f>0){var g=e.substring(0,f),h=e.substring(f+2);b.headers[g.toLowerCase()]=h}}return b};b.exports=function(a){a.method=a.method.toUpperCase(),a.uri=a.uri.toString();var b=new XMLHttpRequest;b.onreadystatechange=function(){4===b.readyState&&0!==b.status&&a.onComplete&&a.onComplete(b.status>=400?b.status+" "+b.statusText:void 0,d(b),a.json?JSON.parse(b.responseText):b.responseText)},b.onerror=function(){a.onComplete("XHR error - CORS denied?",d(b))},a.onProgress&&b.upload.addEventListener("progress",a.onProgress,!1),b.open(a.method,a.uri,!0);for(var e in a.headers)c.indexOf(e)>-1||b.setRequestHeader(e,a.headers[e]);a.json&&"boolean"!=typeof a.json&&(b.setRequestHeader("Content-Type","application/json"),a.body=JSON.stringify(a.json)),b.send(a.body)}},{}],7:[function(a,b,c){"use strict";var d=8,e=function(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c},f=function(a,b){return a>>>b|a<<32-b},g=function(a,b){return a>>>b},h=function(a,b,c){return a&b^~a&c},i=function(a,b,c){return a&b^a&c^b&c},j=function(a){return f(a,2)^f(a,13)^f(a,22)},k=function(a){return f(a,6)^f(a,11)^f(a,25)},l=function(a){return f(a,7)^f(a,18)^g(a,3)},m=function(a){return f(a,17)^f(a,19)^g(a,10)},n=function(a,b){var c,d,f,g,n,o,p,q,r,s,t,u,v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],w=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],x=new Array(64);for(a[b>>5]|=128<<24-b%32,a[(b+64>>9<<4)+15]=b,r=0;r<a.length;r+=16){for(c=w[0],d=w[1],f=w[2],g=w[3],n=w[4],o=w[5],p=w[6],q=w[7],s=0;64>s;s++)x[s]=16>s?a[s+r]:e(e(e(m(x[s-2]),x[s-7]),l(x[s-15])),x[s-16]),t=e(e(e(e(q,k(n)),h(n,o,p)),v[s]),x[s]),u=e(j(c),i(c,d,f)),q=p,p=o,o=n,n=e(g,t),g=f,f=d,d=c,c=e(t,u);w[0]=e(c,w[0]),w[1]=e(d,w[1]),w[2]=e(f,w[2]),w[3]=e(g,w[3]),w[4]=e(n,w[4]),w[5]=e(o,w[5]),w[6]=e(p,w[6]),w[7]=e(q,w[7])}return w},o=function(a){for(var b=Array(),c=(1<<d)-1,e=0;e<a.length*d;e+=d)b[e>>5]|=(a.charCodeAt(e/d)&c)<<24-e%32;return b},p=function(a){for(var b="0123456789abcdef",c="",d=0;d<4*a.length;d++)c+=b.charAt(15&a[d>>2]>>8*(3-d%4)+4)+b.charAt(15&a[d>>2]>>8*(3-d%4));return c},q=function(a,b){var c=o(a);c.length>16&&(c=n(c,a.length*d));for(var e=new Array(16),f=new Array(16),g=0;16>g;g++)e[g]=909522486^c[g],f[g]=1549556828^c[g];var h=n(e.concat(o(b)),512+b.length*d);return n(f.concat(h),768)};c.sha256=function(a){return p(n(a,a.length*d))},c.sha256hmac=function(a,b){return p(q(a,b))}},{}],8:[function(a,b){"use strict";var c=a("./url"),d=a("./browser/crypto"),e=a("./browser/request"),f=a("./browser/readers"),g=a("./browser/feature-support"),h=function(a,b,c){if(this.options={hosts:this.parseUrls(a),publicKey:b,privateKey:c},"undefined"!=typeof window){var d=g.getUnsupported();if(d.length)throw new Error("Browser does not support "+d.join(", "))}};h.prototype.getImageIdentifier=function(a,b){return d.md5(a,b)},h.prototype.getImageIdentifierFromArrayBuffer=function(a,b){return d.md5(a,b,{binary:!0,type:"string"})},h.prototype.getImageUrl=function(a){return new c({baseUrl:this.getHostForImageIdentifier(a),publicKey:this.options.publicKey,privateKey:this.options.privateKey,imageIdentifier:a})},h.prototype.getImagesUrl=function(a){return this.getResourceUrl("","/",a?a.toString():null)},h.prototype.getUserUrl=function(){return this.getResourceUrl()},h.prototype.getResourceUrl=function(a,b,d){return new c({baseUrl:this.options.hosts[0],publicKey:this.options.publicKey,privateKey:this.options.privateKey,imageIdentifier:a,path:b,query:d})},h.prototype.getSignedResourceUrl=function(a,b,c){var d=(c||new Date).toISOString().replace(/\.\d+Z$/,"Z"),e=this.generateSignature(a,b.toString(),d),f=b.toString().indexOf("?")>-1?"&":"?";return f+="signature="+encodeURIComponent(e),f+="&timestamp="+encodeURIComponent(d),b+f},h.prototype.generateSignature=function(a,b,c){var e=[a,b,this.options.publicKey,c].join("|"),f=d.sha256(this.options.privateKey,e);return f},h.prototype.getHostForImageIdentifier=function(a){var b=parseInt(a.slice(0,2),16);return this.options.hosts[b%this.options.hosts.length]},h.prototype.parseUrls=function(a){"string"==typeof a&&(a=[a]);for(var b=[],c=0;c<a.length;c++)b.push(a[c].replace(/:80(\/|$)/,"$1").replace(/\/$/,""));return b},h.prototype.headImage=function(a,b){var c=this.getResourceUrl(a);e({method:"HEAD",uri:c,onComplete:b})},h.prototype.deleteImage=function(a,b){this.getImageIdentifier(a,function(a,c){return a?b(a):(this.deleteImageByIdentifier(c,b),void 0)}.bind(this))},h.prototype.deleteImageByIdentifier=function(a,b){var c=this.getSignedResourceUrl("DELETE",this.getResourceUrl(a));e({method:"DELETE",uri:c,onComplete:b})},h.prototype.imageIdentifierExists=function(a,b){this.headImage(a,function(a,c){var d=c&&c.statusCode?c.statusCode:void 0;b(isNaN(a)?a:void 0,200===d)})},h.prototype.imageExists=function(a,b){this.getImageIdentifier(a,function(a,c){return a?b(a):(this.imageIdentifierExists(c,b),void 0)}.bind(this))},h.prototype.addImageFromArrayBuffer=function(a,b,c){this.getImageIdentifierFromArrayBuffer(a,function(d,f){var g=this.getSignedResourceUrl("PUT",this.getResourceUrl(f)),h=b.onComplete||b,i=b.onProgress||null;e({method:"PUT",uri:g,body:"undefined"!=typeof window&&c instanceof window.File?c:a,headers:{Accept:"application/json","User-Agent":"imboclient-js","Content-Length":a.length},onComplete:function(a,b){return a?h(a,void 0,b):(h(void 0,b.headers["x-imbo-imageidentifier"],b),void 0)},onProgress:i})}.bind(this))},h.prototype.addImage=function(a,b){f.getContentsFromFile(a,function(c,d){return c?b(c):(this.addImageFromArrayBuffer(d,b,a),void 0)}.bind(this))},h.prototype.addImageFromUrl=function(a,b){f.getContentsFromUrl(a,function(c,d,e){return c?b(c):(this.addImageFromArrayBuffer(e,b,a),void 0)}.bind(this))},h.prototype.getUserInfo=function(a){e({method:"GET",uri:this.getUserUrl(),json:!0,onComplete:function(b,c,d){a(b,d,c)}})},h.prototype.getImages=function(a,b){var c=this.getImagesUrl(a);e({method:"GET",uri:c,json:!0,onComplete:function(a,c,d){b(a,d,c)}})},h.prototype.getMetadata=function(a,b){var c=this.getResourceUrl(a,"/meta");e({method:"GET",uri:c,json:!0,onComplete:function(a,c,d){b(a,d,c)}})},h.prototype.deleteMetadata=function(a,b){var c=this.getSignedResourceUrl("DELETE",this.getResourceUrl(a,"/meta"));e({method:"DELETE",uri:c,onComplete:b})},h.prototype.editMetadata=function(a,b,c,d){var f=this.getSignedResourceUrl(d||"POST",this.getResourceUrl(a,"/meta"));e({method:d||"POST",uri:f,json:b,onComplete:c})},h.prototype.replaceMetadata=function(a,b,c){this.editMetadata(a,b,c,"PUT")},b.exports=h},{"./browser/crypto":2,"./browser/feature-support":3,"./browser/readers":5,"./browser/request":6,"./url":10}],9:[function(a,b){"use strict";var c=function(){this.values={page:1,limit:20,metadata:!1,query:null,from:null,to:null}};c.prototype.page=function(a){return a?(this.values.page=parseInt(a,10),this):this.values.page},c.prototype.limit=function(a){return a?(this.values.limit=a,this):this.values.limit},c.prototype.metadata=function(a){return"undefined"==typeof a?this.values.metadata:(this.values.metadata=!!a,this)},c.prototype.query=function(a){return a?(this.values.query=a,this):this.values.query},c.prototype.from=function(a){return a?(this.values.from=a instanceof Date?a:this.values.from,this):this.values.from},c.prototype.to=function(a){return a?(this.values.to=a instanceof Date?a:this.values.to,this):this.values.to},c.prototype.toQueryString=function(){for(var a={},b=["page","limit","metadata","query","from","to"],c=0;c<b.length;c++)this.values[b[c]]&&(a[b[c]]=this.values[b[c]]);a.query&&(a.query=JSON.stringify(a.query)),a.from&&(a.from=Math.floor(a.from.getTime()/1e3)),a.to&&(a.to=Math.floor(a.to.getTime()/1e3));var d,e=[];for(d in a)e.push(d+"="+encodeURIComponent(a[d]));return e.join("&")},c.prototype.toString=c.prototype.toQueryString,b.exports=c},{}],10:[function(a,b){"use strict";var c=a("./browser/crypto"),d=function(a){a=a||{},this.transformations=[],this.baseUrl=a.baseUrl,this.publicKey=a.publicKey,this.privateKey=a.privateKey,this.imageIdentifier=a.imageIdentifier||"",this.path=a.path||"",this.queryString=a.queryString};d.prototype.border=function(a,b,c){return a=(a||"000000").replace(/^#/,""),b=parseInt(isNaN(b)?1:b,10),c=parseInt(isNaN(c)?1:c,10),this.append("border:color="+a+",width="+b+",height="+c)},d.prototype.canvas=function(a,b,c,d,e,f){var g=["width="+parseInt(a,10),"height="+parseInt(b,10)];return c&&g.push("mode="+c),d&&g.push("x="+parseInt(d,10)),e&&g.push("y="+parseInt(e,10)),f&&g.push("bg="+f.replace(/^#/,"")),this.append("canvas:"+g.join(","))},d.prototype.compress=function(a){return a=parseInt(a,10),this.append("compress:quality="+(a?a:75))},d.prototype.convert=function(a){return this.imageIdentifier=this.imageIdentifier.substr(0,32)+"."+a,this},d.prototype.gif=function(){return this.convert("gif")},d.prototype.jpg=function(){return this.convert("jpg")},d.prototype.png=function(){return this.convert("png")},d.prototype.crop=function(a,b,c,d){return this.append("crop:x="+a+",y="+b+",width="+c+",height="+d)},d.prototype.desaturate=function(){return this.append("desaturate")},d.prototype.flipHorizontally=function(){return this.append("flipHorizontally")},d.prototype.flipVertically=function(){return this.append("flipVertically")},d.prototype.maxSize=function(a,b){var c=[];return a&&c.push("width="+parseInt(a,10)),b&&c.push("height="+parseInt(b,10)),this.append("maxSize:"+c.join(","))},d.prototype.resize=function(a,b){var c=[];return a&&c.push("width="+parseInt(a,10)),b&&c.push("height="+parseInt(b,10)),this.append("resize:"+c.join(","))},d.prototype.rotate=function(a,b){return isNaN(a)?this:(b=(b||"000000").replace(/^#/,""),this.append("rotate:angle="+a+",bg="+b))},d.prototype.sepia=function(a){return a=parseInt(a,10),this.append("sepia:threshold="+(a?a:80))},d.prototype.thumbnail=function(a,b,c){return this.append("thumbnail:width="+(a||50)+",height="+(b||50)+",fit="+(c||"outbound"))},d.prototype.transpose=function(){return this.append("transpose")},d.prototype.transverse=function(){return this.append("transverse")},d.prototype.reset=function(){return this.imageIdentifier=this.imageIdentifier.substr(0,32),this.transformations=[],this},d.prototype.append=function(a){return this.transformations.push(encodeURIComponent(a)),this},d.prototype.getAccessToken=function(a){return c.sha256(this.privateKey,a)},d.prototype.getQueryString=function(){var a=this.queryString||"";return this.transformations.length&&(a+=a.length?"&":"",a+="t[]="+this.transformations.join("&t[]=")),a},d.prototype.getUrl=function(){var a=this.baseUrl+"/users/"+this.publicKey;(this.imageIdentifier||this.path)&&(a=a+"/images/"+this.imageIdentifier+this.path),a=a.replace(/\/+$/,"");var b=this.getQueryString();b.length&&(a+="?"+b);var c=this.getAccessToken(a,this.privateKey);return a+(a.indexOf("?")>-1?"&":"?")+"accessToken="+c},d.prototype.toString=function(){return this.getUrl()},b.exports=d},{"./browser/crypto":2}],11:[function(a,b){var c=b.exports={};c.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){if(a.source===window&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var b=c.shift();b()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),c.title="browser",c.browser=!0,c.env={},c.argv=[],c.binding=function(){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(){throw new Error("process.chdir is not supported")}},{}]},{},[1])(1)});