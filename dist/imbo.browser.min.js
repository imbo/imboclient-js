// Set up a global Imbo-namespace and signify that we're not in Node
Imbo={Node:!1,Version:"0.3.1"},function(e,t){var n={};n.MD5=function(e){function t(e){var t=(e>>>0).toString(16);return"00000000".substr(0,8-t.length)+t}function n(e){var t=[];for(var n=0;n<e.length;n++)t=t.concat(l(e[n]));return t}function r(e){var t=[];for(var n=0;n<8;n++)t.push(e&255),e>>>=8;return t}function i(e,t){return e<<t&4294967295|e>>>32-t}function s(e,t,n){return e&t|~e&n}function o(e,t,n){return n&e|~n&t}function u(e,t,n){return e^t^n}function a(e,t,n){return t^(e|~n)}function f(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function l(e){var t=[];for(var n=0;n<e.length;n++)if(e.charCodeAt(n)<=127)t.push(e.charCodeAt(n));else{var r=encodeURIComponent(e.charAt(n)).substr(1).split("%");for(var i=0;i<r.length;i++)t.push(parseInt(r[i],16))}return t}function c(e,n,r,i){var s="",o=0,u=0;for(var a=3;a>=0;a--)u=arguments[a],o=u&255,u>>>=8,o<<=8,o|=u&255,u>>>=8,o<<=8,o|=u&255,u>>>=8,o<<=8,o|=u,s+=t(o);return s}function h(e){var t=new Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n];return t}function v(e,t){return 4294967295&e+t}function m(){function e(e,t,n,r){var s=S;S=E,E=w,w=v(w,i(v(b,v(e,v(t,n))),r)),b=s}var t=p.length;p.push(128);var n=p.length%64;if(n>56){for(var l=0;l<64-n;l++)p.push(0);n=p.length%64}for(l=0;l<56-n;l++)p.push(0);p=p.concat(r(t*8));var h=1732584193,d=4023233417,m=2562383102,y=271733878,b=0,w=0,E=0,S=0;for(l=0;l<p.length/64;l++){b=h,w=d,E=m,S=y;var x=l*64;e(s(w,E,S),3614090360,f(p,x),7),e(s(w,E,S),3905402710,f(p,x+4),12),e(s(w,E,S),606105819,f(p,x+8),17),e(s(w,E,S),3250441966,f(p,x+12),22),e(s(w,E,S),4118548399,f(p,x+16),7),e(s(w,E,S),1200080426,f(p,x+20),12),e(s(w,E,S),2821735955,f(p,x+24),17),e(s(w,E,S),4249261313,f(p,x+28),22),e(s(w,E,S),1770035416,f(p,x+32),7),e(s(w,E,S),2336552879,f(p,x+36),12),e(s(w,E,S),4294925233,f(p,x+40),17),e(s(w,E,S),2304563134,f(p,x+44),22),e(s(w,E,S),1804603682,f(p,x+48),7),e(s(w,E,S),4254626195,f(p,x+52),12),e(s(w,E,S),2792965006,f(p,x+56),17),e(s(w,E,S),1236535329,f(p,x+60),22),e(o(w,E,S),4129170786,f(p,x+4),5),e(o(w,E,S),3225465664,f(p,x+24),9),e(o(w,E,S),643717713,f(p,x+44),14),e(o(w,E,S),3921069994,f(p,x),20),e(o(w,E,S),3593408605,f(p,x+20),5),e(o(w,E,S),38016083,f(p,x+40),9),e(o(w,E,S),3634488961,f(p,x+60),14),e(o(w,E,S),3889429448,f(p,x+16),20),e(o(w,E,S),568446438,f(p,x+36),5),e(o(w,E,S),3275163606,f(p,x+56),9),e(o(w,E,S),4107603335,f(p,x+12),14),e(o(w,E,S),1163531501,f(p,x+32),20),e(o(w,E,S),2850285829,f(p,x+52),5),e(o(w,E,S),4243563512,f(p,x+8),9),e(o(w,E,S),1735328473,f(p,x+28),14),e(o(w,E,S),2368359562,f(p,x+48),20),e(u(w,E,S),4294588738,f(p,x+20),4),e(u(w,E,S),2272392833,f(p,x+32),11),e(u(w,E,S),1839030562,f(p,x+44),16),e(u(w,E,S),4259657740,f(p,x+56),23),e(u(w,E,S),2763975236,f(p,x+4),4),e(u(w,E,S),1272893353,f(p,x+16),11),e(u(w,E,S),4139469664,f(p,x+28),16),e(u(w,E,S),3200236656,f(p,x+40),23),e(u(w,E,S),681279174,f(p,x+52),4),e(u(w,E,S),3936430074,f(p,x),11),e(u(w,E,S),3572445317,f(p,x+12),16),e(u(w,E,S),76029189,f(p,x+24),23),e(u(w,E,S),3654602809,f(p,x+36),4),e(u(w,E,S),3873151461,f(p,x+48),11),e(u(w,E,S),530742520,f(p,x+60),16),e(u(w,E,S),3299628645,f(p,x+8),23),e(a(w,E,S),4096336452,f(p,x),6),e(a(w,E,S),1126891415,f(p,x+28),10),e(a(w,E,S),2878612391,f(p,x+56),15),e(a(w,E,S),4237533241,f(p,x+20),21),e(a(w,E,S),1700485571,f(p,x+48),6),e(a(w,E,S),2399980690,f(p,x+12),10),e(a(w,E,S),4293915773,f(p,x+40),15),e(a(w,E,S),2240044497,f(p,x+4),21),e(a(w,E,S),1873313359,f(p,x+32),6),e(a(w,E,S),4264355552,f(p,x+60),10),e(a(w,E,S),2734768916,f(p,x+24),15),e(a(w,E,S),1309151649,f(p,x+52),21),e(a(w,E,S),4149444226,f(p,x+16),6),e(a(w,E,S),3174756917,f(p,x+44),10),e(a(w,E,S),718787259,f(p,x+8),15),e(a(w,E,S),3951481745,f(p,x+36),21),h=v(h,b),d=v(d,w),m=v(m,E),y=v(y,S)}return c(y,m,d,h).toUpperCase()}var p=null,d=null;return typeof e=="string"?p=l(e):e.constructor==Array?e.length===0?p=e:typeof e[0]=="string"?p=n(e):typeof e[0]=="number"?p=e:d=typeof e[0]:typeof ArrayBuffer!="undefined"?e instanceof ArrayBuffer?p=h(new Uint8Array(e)):e instanceof Uint8Array||e instanceof Int8Array?p=h(e):e instanceof Uint32Array||e instanceof Int32Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Float32Array||e instanceof Float64Array?p=h(new Uint8Array(e.buffer)):d=typeof e:d=typeof e,d&&alert("MD5 type mismatch, cannot process "+d),m()};var r=function(e,t){var n={},r=n.lib={},i=r.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var n=new e;return t&&n.mixIn(t),n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.$super.extend(this)}}}(),s=r.WordArray=i.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,e=e.sigBytes;this.clamp();if(r%4)for(var i=0;i<e;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-8*(i%4)&255)<<24-8*((r+i)%4);else if(65535<n.length)for(i=0;i<e;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return s.create(n,t)}}),o=n.enc={},u=o.Hex={stringify:function(e){for(var t=e.words,e=e.sigBytes,n=[],r=0;r<e;r++){var i=t[r>>>2]>>>24-8*(r%4)&255;n.push((i>>>4).toString(16)),n.push((i&15).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-4*(r%8);return s.create(n,t/2)}},a=o.Latin1={stringify:function(e){for(var t=e.words,e=e.sigBytes,n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-8*(r%4)&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(e.charCodeAt(r)&255)<<24-8*(r%4);return s.create(n,t)}},f=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(a.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return a.parse(unescape(encodeURIComponent(e)))}},l=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=s.create(),this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,u=i/(4*o),u=t?e.ceil(u):e.max((u|0)-this._minBufferSize,0),t=u*o,i=e.min(4*t,i);if(t){for(var a=0;a<t;a+=o)this._doProcessBlock(r,a);a=r.splice(0,t),n.sigBytes-=i}return s.create(a,i)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=l.extend({init:function(){this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize(),this._hash},clone:function(){var e=l.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:16,_createHelper:function(e){return function(t,n){return e.create(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return c.HMAC.create(e,n).finalize(t)}}});var c=n.algo={};return n}(Math);(function(e){var t=r,n=t.lib,i=n.WordArray,n=n.Hasher,s=t.algo,o=[],u=[];(function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(e|0))|0}for(var r=2,i=0;64>i;)t(r)&&(8>i&&(o[i]=n(e.pow(r,.5))),u[i]=n(e.pow(r,1/3)),i++),r++})();var a=[],s=s.SHA256=n.extend({_doReset:function(){this._hash=i.create(o.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],o=n[3],f=n[4],l=n[5],c=n[6],h=n[7],p=0;64>p;p++){if(16>p)a[p]=e[t+p]|0;else{var d=a[p-15],v=a[p-2];a[p]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+a[p-7]+((v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10)+a[p-16]}d=h+((f<<26|f>>>6)^(f<<21|f>>>11)^(f<<7|f>>>25))+(f&l^~f&c)+u[p]+a[p],v=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&s^i&s),h=c,c=l,l=f,f=o+d|0,o=s,s=i,i=r,r=d+v|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+o|0,n[4]=n[4]+f|0,n[5]=n[5]+l|0,n[6]=n[6]+c|0,n[7]=n[7]+h|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[(r+64>>>9<<4)+15]=n,e.sigBytes=4*t.length,this._process()}});t.SHA256=n._createHelper(s),t.HmacSHA256=n._createHmacHelper(s)})(Math),function(){var e=r,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=e.create(),"string"==typeof n&&(n=t.parse(n));var r=e.blockSize,s=4*r;n.sigBytes>s&&(n=e.finalize(n));for(var o=this._oKey=n.clone(),u=this._iKey=n.clone(),a=o.words,f=u.words,l=0;l<r;l++)a[l]^=1549556828,f[l]^=909522486;o.sigBytes=u.sigBytes=s,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,e=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),window.BlobBuilder||(window.BlobBuilder=window.WebKitBlobBuilder||window.MSBlobBuilder||window.MozBlobBuilder),typeof XMLHttpRequest.prototype.sendAsBinary!="function"&&(XMLHttpRequest.prototype.sendAsBinary=function(t){var n=e.Browser.getArrayBuffer(t),r=null;try{if(typeof Blob!="undefined"&&typeof DataView!="undefined"){var i=new DataView(n);r=new Blob([i])}else typeof Blob!="undefined"&&(r=new Blob([n]))}catch(s){r=null}if(!r){var o=new BlobBuilder;o.append(n),r=o.getBlob()}this.send(r)}),e.Browser={},e.Browser.getArrayBuffer=function(e){var t=new ArrayBuffer(e.length),n=new Uint8Array(t,0);for(var r=0;r<e.length;r++)n[r]=e.charCodeAt(r)&255;return t},e.Browser.md5=function(t){return typeof t!="object"&&(t=e.Browser.getArrayBuffer(t)),n.MD5(t).toLowerCase()},e.Browser.sha256=function(e,t){return r.HmacSHA256(t,e).toString()},e.Browser.getImageBlob=function(n,r){return n.constructor.name=="File"?e.Browser.getContentsFromFile(n,r):r(t,n)},e.Browser.getContentsFromFile=function(e,n){var r=new FileReader;r.onload=function(e){return n(t,e.target.result)},r.readAsBinaryString(e)},e.Browser.getContentsFromUrl=function(e,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.overrideMimeType("text/plain; charset=x-user-defined"),r.onreadystatechange=function(){r.readyState===4&&n(t,r.responseText)},r.send(null)}}(Imbo),function(e,t){var n={Accept:"application/json,image/*","User-Agent":"imboclient-js "+Imbo.Version+" ("+(e||navigator.userAgent)+")"};Imbo.Compat={sha256:function(e,t){return Imbo.Node?crypto.createHmac("sha256",e).update(t).digest("hex"):Imbo.Browser.sha256(e,t)},md5:function(e,n,r){if(!Imbo.Node)return e instanceof File?Imbo.Browser.getContentsFromFile(e,function(e,t){Imbo.Compat.md5(t,n)}):n(t,Imbo.Browser.md5(e),{size:e.length})},request:function(e,r,i,s){e=e.toUpperCase(),!s&&(i.complete||typeof i=="function")&&(s=i,i=null);var o=s.complete||s,u=i&&i.constructor&&i.constructor.name=="Object",a=e=="PUT"?Imbo.Compat.getPutHeaders(i?i.length:0):n;u&&(a["Content-Type"]="application/json",i=JSON.stringify(i)),Imbo.Node;var f=new XMLHttpRequest;f.onreadystatechange=function(){f.readyState===4&&f.status!==0&&o&&o(t,Imbo.Compat.requestDone(f,u))},f.open(e,r,!0),f.setRequestHeader("Accept",n.Accept),f.onerror=function(){o("XMLHttpRequest failed - CORS disabled?")},s.progress&&f.upload.addEventListener("progress",s.progress,!1),s.uploadComplete&&f.upload.addEventListener("load",s.uploadComplete,!1),e=="PUT"?f.sendAsBinary(i):f.send(i)},requestDone:function(e,t){var n={"Content-Type":e.getResponseHeader("Content-Type"),"Last-Modified":e.getResponseHeader("Last-Modified"),"X-Imbo-Error-Internalcode":e.getResponseHeader("X-Imbo-Error-Internalcode")};for(var r in n)n[r]||delete n[r];return n["Content-Type"]=="application/json"&&(t=!0),{statusCode:e.status,body:t?JSON.parse(e.responseText):e.responseText,headers:n}},getPutHeaders:function(e){var t={};for(var r in n)t[r]=n[r];return e&&(t["Content-Length"]=e),t},getContentsFromUrl:function(e,t){if(!Imbo.Node)return Imbo.Browser.getContentsFromUrl(e,t)},getContents:function(e,t){return typeof e=="string"&&Imbo.Node?fs.readFile(e,"binary",function(e,n){if(e&&e.code=="ENOENT")return t("File does not exist ("+e.path+")");t(e,n)}):Imbo.Node?t("getContents() - not sure what to do with the passed file"):Imbo.Browser.getContentsFromFile(e,t)}}}(typeof env=="undefined"?null:env),function(e,t){function n(e,t,n,r,i){this.transformations=[],this.baseUrl=e,this.publicKey=t,this.imageIdentifier=r,this.privateKey=n,this.path=i||""}return e.Compat=e.Compat||require("./compat"),n.prototype.border=function(e,t,n){return e=(e||"000000").replace(/^#/,""),t=parseInt(isNaN(t)?1:t,10),n=parseInt(isNaN(n)?1:n,10),this.append("border:color="+e+",width="+t+",height="+n)},n.prototype.compress=function(e){return e=parseInt(e,10),this.append("compress:quality="+(e?e:75))},n.prototype.convert=function(e){return this.imageIdentifier=this.imageIdentifier.substr(0,32)+"."+e,this},n.prototype.gif=function(){return this.convert("gif")},n.prototype.jpg=function(){return this.convert("jpg")},n.prototype.png=function(){return this.convert("png")},n.prototype.crop=function(e,t,n,r){return this.append("crop:x="+e+",y="+t+",width="+n+",height="+r)},n.prototype.desaturate=function(){return this.append("desaturate")},n.prototype.flipHorizontally=function(){return this.append("flipHorizontally")},n.prototype.flipVertically=function(){return this.append("flipVertically")},n.prototype.maxSize=function(e,t){var n=[];return e&&n.push("width="+parseInt(e,10)),t&&n.push("height="+parseInt(t,10)),this.append("maxSize:"+n.join(","))},n.prototype.resize=function(e,t){var n=[];return e&&n.push("width="+parseInt(e,10)),t&&n.push("height="+parseInt(t,10)),this.append("resize:"+n.join(","))},n.prototype.rotate=function(e,t){return isNaN(e)?this:(t=(t||"000000").replace(/^#/,""),this.append("rotate:angle="+e+",bg="+t))},n.prototype.thumbnail=function(e,t,n){return this.append("thumbnail:width="+(e||50)+",height="+(t||50)+",fit="+(n||"outbound"))},n.prototype.transpose=function(){return this.append("transpose")},n.prototype.transverse=function(){return this.append("transverse")},n.prototype.reset=function(){return this.imageIdentifier=this.imageIdentifier.substr(0,32),this.transformations=[],this},n.prototype.append=function(e){return this.transformations.push(encodeURIComponent(e)),this},n.prototype.getAccessToken=function(t){return e.Compat.sha256(this.privateKey,t)},n.prototype.getQueryString=function(){var e="";return this.transformations.length&&(e="t[]="+this.transformations.reduce(function(e,t){return e+"&t[]="+t})),e},n.prototype.getUrl=function(){var e=this.baseUrl+"/users/"+this.publicKey+"/images/"+this.imageIdentifier+this.path,t=this.getQueryString();t.length&&(e+="?"+t);var n=this.getAccessToken(e,this.privateKey);return e+(t.length?"&":"?")+"accessToken="+n},n.prototype.toString=function(){return this.getUrl()},typeof module!="undefined"&&(module.exports=n),e.Url=n,n}(typeof Imbo!="undefined"?Imbo:{}),function(e,t){var n=function(e,t,n){this.options={hosts:this.parseUrls(e),publicKey:t,privateKey:n}},r=function(e){return e&&e.body&&e.body.error?e.body.error.message:e&&e.headers?e.headers["X-Imbo-Error-Internalcode"]||e.statusCode:e?e:"Unknown error"};return n.prototype.getImageIdentifier=function(t,n){return e.Compat.md5(t,n)},n.prototype.getImageIdentifierFromString=function(t,n){return e.Compat.md5(t,n,!0)},n.prototype.getImageUrl=function(t){var n=this.getHostForImageIdentifier(t);return new e.Url(n,this.options.publicKey,this.options.privateKey,t)},n.prototype.getResourceUrl=function(t,n){return new e.Url(this.options.hosts[0],this.options.publicKey,this.options.privateKey,t,n)},n.prototype.getSignedResourceUrl=function(e,t,n){var r=(n||new Date).toISOString().replace(/\.\d+Z$/,"Z"),i=this.generateSignature(e,t.toString(),r),s=t.toString().indexOf("?")>-1?"&":"?";return s+="signature="+encodeURIComponent(i),s+="&timestamp="+encodeURIComponent(r),t+s},n.prototype.generateSignature=function(t,n,r){var i=[t,n,this.options.publicKey,r].join("|"),s=e.Compat.sha256(this.options.privateKey,i);return s},n.prototype.getHostForImageIdentifier=function(e){var t=parseInt(e.slice(0,2),16);return this.options.hosts[t%this.options.hosts.length]},n.prototype.parseUrls=function(e){typeof e=="string"&&(e=[e]);var t=[];for(var n=0;n<e.length;n++)t.push(e[n].replace(/:80(\/|$)/,"$1").replace(/\/$/,""));return t},n.prototype.headImage=function(t,n){var i=this.getResourceUrl(t),s;e.Compat.request("HEAD",i.toString(),function(e,t){return e?n(e,t):t.statusCode!==200?n(r(t),t):n(s,t)})},n.prototype.deleteImage=function(e,t){var n=this;n.getImageIdentifier(e,function(e,r){if(e)return t(e);n.deleteImageByIdentifier(r,t)})},n.prototype.deleteImageByIdentifier=function(n,i){var s=this.getSignedResourceUrl("DELETE",this.getResourceUrl(n));e.Compat.request("DELETE",s,function(e,n){if(e||n&&n.statusCode!=200)return i(e||r(n),n);i(t,n)})},n.prototype.imageIdentifierExists=function(e,n){this.headImage(e,function(i,s){if(i&&(i==404||s&&s.statusCode==404))return n(t,!1,e);if(i)return n(i);if(s&&s.statusCode!=404&&s.statusCode!=200)return n(r(s));n(t,s.statusCode==200,e)})},n.prototype.imageExists=function(e,t){var n=this;n.getImageIdentifier(e,function(e,r){if(e)return t(e);n.imageIdentifierExists(r,t)})},n.prototype.addImageFromBlob=function(n,i){var s=this,o=i.complete||i,u=Date.now();s.getImageIdentifierFromString(n,function(u,a){if(u)return o(u);var f=s.getSignedResourceUrl("PUT",s.getResourceUrl(a));e.Compat.request("PUT",f,n,{complete:function(e,n){var i=n&&n.body?n.body.imageIdentifier:a;return e?o(e,i,n):n.statusCode!=201?o(r(n),i,n):o(t,i,n)},progress:i.progress||null,uploadComplete:i.uploadComplete||null})})},n.prototype.addImage=function(t,n){var r=this;e.Compat.getContents(t,function(e,t){if(e)return n(e);r.addImageFromBlob(t,n)})},n.prototype.addImageFromUrl=function(t,n){var r=this;e.Compat.getContentsFromUrl(t,function(e,t){if(e)return n(e);r.addImageFromBlob(t,n)})},n.prototype.getMetadata=function(n,i){var s=this.getResourceUrl(n,"/meta");e.Compat.request("GET",s.toString(),function(e,n){if(e||n&&n.statusCode!=200)return i(e||r(n),null,n);i(t,n.body,n)})},n.prototype.deleteMetadata=function(n,i){var s=this.getSignedResourceUrl("DELETE",this.getResourceUrl(n,"/meta"));e.Compat.request("DELETE",s,function(e,n){if(e||n&&n.statusCode!=200)return i(e||r(n),n);i(t,n)})},n.prototype.editMetadata=function(n,i,s){var o=this.getSignedResourceUrl("POST",this.getResourceUrl(n,"/meta"));e.Compat.request("POST",o,i,function(e,n){if(e||n&&n.statusCode!=200&&n.statusCode!=201)return s(e||r(n),n);s(t,n)})},e.Client=n,n}(Imbo);